{% extends 'base.html.twig' %}

{% block title %}User index{% endblock %}

{% block body %}
<div class="bg-white flex justify-center items-center max-h-screen m-20">
    <div class="w-full flex-col justify-center bg-white rounded-lg shadow-lg p-4 mb-6">
     <h2 class="text-xl font-bold text-center m-4">Utilisateur index</h2>
<div class="flex justify-center">
    <table class="table min-w-full text-left text-sm whitespace-nowrap">
        <thead scope="col" class="px-6 py-4">
            <tr>
                
                <th scope="col" class="px-6 py-4">Email</th>
                <th scope="col" class="px-6 py-4">Roles</th>
                
                <th scope="col" class="px-6 py-4">actions</th>
            </tr>
        </thead>
        <tbody>
        {% for user in users %}
            <tr class="border-b dark:border-neutral-600">
               
                <td scope="row" class="px-6 py-4">{{ user.email }}</td>
                <td scope="row" class="px-6 py-4"><p class="border-2 border-red-500 rounded-lg text-center shadow-lg text-base text-red-600 w-fit m-2 p-1" >{{ user.roles ? user.roles|json_encode : '' }}</p></td>
                
                <td scope="row" class="px-6 py-4">
                {%if is_granted ('ROLE_ADMIN')%}
                    <a href="{{ path('app_user_show', {'id': user.id}) }}"><button class="btn w-20 bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-2 m-2 rounded-md">voir</button></a>
                    <a href="{{ path('app_user_edit', {'id': user.id}) }}"><button class="btn w-20 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-2 m-2 rounded-md">editer</button></a>
                {% endif %}
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="5">rien de créer</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
    <a href="{{ path('app_user_new') }}"><button  class="m-2  w-auto bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-md"> Créer un utilisateur</button></a>
    <a href="{{ path('app_admin_accueil') }}"><button  class="  w-auto bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-md"> Retour</button></a>
</div> </div>
{% endblock %}
